query-table:: false
#+BEGIN_QUERY
{:title [:h2 "‚ö†Ô∏è Overdue"]
 :query [:find (pull ?b [*])
         :in $ ?today
         :where
         [?b :block/marker ?marker]
         [(contains? #{"TODO" "DOING"} ?marker)]
         (or [?b :block/scheduled ?d] [?b :block/deadline ?d])
         [(< ?d ?today)]]
 :inputs [:today]
 :result-transform (fn [result]
                     (sort-by (fn [b]
                                (let [priority (get b :block/priority "Z")
                                      date (or (get b :block/scheduled) (get b :block/deadline) 99999999)]
                                  [priority date]))
                              result))
 :collapsed? false}
#+END_QUERY

-
- #+BEGIN_QUERY
  {:title [:h2 "üìã Actieve Taken"]
   :query [:find (pull ?b [*])
           :in $ ?today
           :where
           [?b :block/marker ?marker]
           [(contains? #{"TODO" "DOING"} ?marker)]
           (or-join [?b ?today]
             (and (or [?b :block/scheduled ?d] [?b :block/deadline ?d])
                  [(>= ?d ?today)])
             (and [?b :block/priority]
                  (not [?b :block/scheduled])
                  (not [?b :block/deadline])))]
   :inputs [:today]
   :result-transform (fn [result]
                       (sort-by (fn [b]
                                  (let [priority (get b :block/priority "Z")
                                        date (or (get b :block/scheduled) (get b :block/deadline) 99999999)]
                                    [priority date]))
                                result))
   :collapsed? false}
  #+END_QUERY
-
- query-table:: false
  #+BEGIN_QUERY
  {:title [:h2 "‚è≥ Waiting"]
   :query [:find (pull ?b [*])
           :where
           [?b :block/marker "WAITING"]
           (or [?b :block/priority]
               [?b :block/scheduled]
               [?b :block/deadline]
               ; Include tasks without any dates/priority for completeness
               (not (or [?b :block/scheduled] [?b :block/deadline] [?b :block/priority])))]
   :result-transform (fn [result]
                       (sort-by (fn [b]
                                  (let [priority (get b :block/priority "Z")
                                        date (or (get b :block/scheduled) (get b :block/deadline) 99999999)]
                                    [priority date]))
                                result))
   :collapsed? false}
  #+END_QUERY
-
- #+BEGIN_QUERY
  {:title [:h2 "üìã Alle Actieve Taken"]
   :query [:find (pull ?b [*])
           :in $ ?today
           :where
           [?b :block/marker ?marker]
           [(contains? #{"TODO" "DOING"} ?marker)]
           (or-join [?b ?today]
             ;; 1. Toekomstige of huidige taken
             (and (or [?b :block/scheduled ?d] [?b :block/deadline ?d])
                  [(>= ?d ?today)])
             ;; 2. Prioriteitstaken zonder datum (reeds in je query)
             (and [?b :block/priority]
                  (not [?b :block/scheduled])
                  (not [?b :block/deadline]))
             ;; 3. NIEUW: Alle overige taken zonder enige datum of prioriteit
             (and (not [?b :block/scheduled])
                  (not [?b :block/deadline])))
           ]
   :inputs [:today]
   :result-transform (fn [result]
                       (sort-by (fn [b]
                                  (let [priority (get b :block/priority "Z")
                                        date (or (get b :block/scheduled) 
                                                 (get b :block/deadline) 
                                                 99999999)]
                                    [priority date])) result))
   :collapsed? false}
  #+END_QUERY
-